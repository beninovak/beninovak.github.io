function SimpleSelect_openSelect3(e,t){e.classList.add("opened");let l=e.querySelector(".inner"),n=l.scrollHeight;n=n>t?t:n,l.style.maxHeight=n+"px",l.classList.remove("drop-up");let s=window.innerHeight-l.getBoundingClientRect().top;l.offsetHeight>=s&&l.classList.add("drop-up")}function SimpleSelect_closeSelect3(e){let t=e.querySelector(".inner");e.classList.remove("opened"),t.style.maxHeight="0px",null!==e.querySelector("input.search")&&(e.querySelector("input.search").value=""),e.querySelector(".no-results")?.remove();for(let t of e.querySelectorAll(".option-hidden"))t.classList.remove("option-hidden")}function SimpleSelect_openCloseSelect3(e,t={}){e.classList.toggle("opened"),e.classList.contains("opened")?SimpleSelect_openSelect3(e,t.dropdownMaxHeight):SimpleSelect_closeSelect3(e)}function SimpleSelect_appendOptions(e,t,l,n,s){let i=document.createElement("span");i.setAttribute("data-value",n.value.toString());let o=e.multiple;if(Object.keys(n.dataset).length){let e=n.dataset;for(const t in e)i.setAttribute("data-"+t,e[t])}if(""===n.value&&""===n.textContent)i.classList.add("placeholder"),i.textContent=""!==s.placeholder?s.placeholder:" ";else if(null!==s.formatOptionsFunction){let e=document.createElement("span");e.append(s.formatOptionsFunction(n)),i.innerHTML=e.innerHTML}else i.textContent=n.label.length?n.label:n.textContent;if(n.selected){let l=i.cloneNode();l.classList.add("selected-top"),l.textContent=n.label.length?n.label:n.textContent,o&&l.prepend(SimpleSelect_getCloseBtn(e,t,s)),t.append(l),i.classList.add("selected"),i.setAttribute("data-selected","1")}else i.setAttribute("data-selected","0");n.disabled&&i.classList.add("disabled"),i.addEventListener("click",(()=>{let l=i.cloneNode();if(l.innerHTML=i.textContent,l.classList.add("selected-top"),!n.disabled){if(e.selectedOptions.length>=s.maximumSelectedOptions&&"0"===i.getAttribute("data-selected"))return;let c=!1;if((!o&&e.val()===l.getAttribute("data-value")||o&&e.val().includes(l.getAttribute("data-value")))&&(c=!0),o||c)o&&(c?(t.querySelector(':scope > span[data-value="'+l.getAttribute("data-value")+'"]')?.remove(),n.removeAttribute("selected"),i.classList.remove("selected"),i.setAttribute("data-selected","0"),SimpleSelect_showPlaceholderIfAppropriate(e,t,s)):(t.insertBefore(l,t.querySelector(".inner")),n.setAttribute("selected","selected"),i.classList.add("selected"),i.setAttribute("data-selected","1"),t.querySelector(":scope > span.placeholder")?.remove()),e.selectedOptions.length===s.maximumSelectedOptions?t.classList.add("maxed"):t.classList.remove("maxed"),l.prepend(SimpleSelect_getCloseBtn(e,t,s)),e.dispatchEvent(new Event("change")));else{let s=e.querySelectorAll("option");for(let e of s)e.removeAttribute("selected");let o=t.querySelectorAll(".inner span");for(let e of o)e.classList.remove("selected"),e.setAttribute("data-selected","0");n.setAttribute("selected","selected"),t.querySelector(".selected-top, .placeholder").replaceWith(l),i.classList.add("selected"),i.setAttribute("data-selected","1"),e.dispatchEvent(new Event("change"))}s.closeOnSelect&&SimpleSelect_closeSelect3(t,s)}})),l.append(i)}function SimpleSelect_showPlaceholderIfAppropriate(e,t,l){if(0===e.selectedOptions.length&&""!==l.placeholder){let e=document.createElement("span");e.classList.add("placeholder"),e.textContent=l.placeholder,t.prepend(e)}}function SimpleSelect_getCloseBtn(e,t,l){let n=document.createElement("b");return n.classList.add("remove"),n.textContent="×",n.addEventListener("click",(n=>{SimpleSelect_removeOption(e,t,n.target.parentElement,l)})),n}function SimpleSelect_removeOption(e,t,l,n){let s=l.getAttribute("data-value"),i=e.querySelector('option[value="'+s+'"]');i?.removeAttribute("selected");let o=t.querySelector('.inner span[data-value="'+s+'"]');o.classList.remove("selected"),o.setAttribute("data-selected","0"),l.remove(),SimpleSelect_showPlaceholderIfAppropriate(e,t,n),e.dispatchEvent(new Event("change"))}function SimpleSelect_filterInput(e,t,l,n,s){e=e.toUpperCase();for(let l of t){if((l.textContent||l.innerText).toUpperCase().indexOf(e)>-1?l.classList.remove("option-hidden"):l.classList.add("option-hidden"),null!==l.closest("div.optgroup")){let e=!1,t=l.parentElement.querySelectorAll("span:not(.title, .no-results)");for(let l of t)if(!l.classList.contains("option-hidden")){e=!0;break}e?l.closest("div.optgroup").classList.remove("option-hidden"):l.closest("div.optgroup").classList.add("option-hidden")}}if(""!==s.searchNoResults){let e=n.querySelectorAll("span:not(.title, .no-results, .option-hidden)");if(e.length)n.querySelector(".no-results")?.remove();else if(!e.length&&!n.querySelector(".no-results")){let e=document.createElement("span");e.classList.add("no-results"),e.textContent=s.searchNoResults,n.append(e)}}}function SimpleSelect_applyConfig(e){const t={search:!1,closeOnSelect:!0,minimumInputLength:3,dropdownMaxHeight:280,maximumSelectedOptions:100,placeholder:"",searchNoResults:"",formatOptionsFunction:null};for(let l in e)t.hasOwnProperty(l)&&SimpleSelect_isOptionValid(l,e[l])&&(t[l]=e[l]);return t}function SimpleSelect_isOptionValid(e,t){switch(e){case"search":case"closeOnSelect":return"boolean"==typeof t;case"minimumInputLength":case"dropdownMaxHeight":case"maximumSelectedOptions":return"number"==typeof t&&t>0;case"placeholder":case"searchNoResults":return"string"==typeof t&&t.length>0&&t.length<1e3;case"formatOptionsFunction":return"function"==typeof t}}function SimpleSelect_initDocumentListener(){document.addEventListener("click",(e=>{if(e.stopPropagation(),null===e.target.closest("div.select3"))for(let e of document.querySelectorAll("div.select3"))SimpleSelect_closeSelect3(e)}))}Element.prototype.Select3=function(e={}){const t=this;if("SELECT"!==t.tagName)return!1;t.hasAttribute("data-select3-initialized")&&"1"===t.getAttribute("data-select3-initialized")&&t.nextSibling?.classList.contains("select3")&&t.nextSibling.remove(),t.multiple||(e.closeOnSelect=!0),e=SimpleSelect_applyConfig(e);let l=document.createElement("div");l.classList.add("select3");for(let e of t.classList)l.classList.add(e);l.addEventListener("click",(t=>{const l=t.target.classList;if(l.contains("select3")||l.contains("selected-top")||l.contains("placeholder")){let l=t.target.closest("div.select3");SimpleSelect_openCloseSelect3(l,e);for(let e of document.querySelectorAll("div.select3"))e.isEqualNode(l)||SimpleSelect_closeSelect3(e)}})),t.selectedOptions.length>e.maximumSelectedOptions&&(e.maximumSelectedOptions=t.selectedOptions.length),t.multiple?l.classList.add("multiple"):l.classList.add("single");let n=document.createElement("div");if(n.classList.add("inner"),e.search){let l=document.createElement("div");l.classList.add("search-wrapper");let s=document.createElement("input");s.classList.add("search"),s.setAttribute("type","search");let i=0;s.addEventListener("keyup",(l=>{let s=l.target.value.length;if(s>=e.minimumInputLength||s<i){let s=l.target.closest(".inner").querySelectorAll("span:not(.title, .no-results)");SimpleSelect_filterInput(l.target.value,s,t,n,e)}i=s})),l.append(s),n.prepend(l)}let s=document.querySelector('label[for="'+t.id+'"]');s?.addEventListener("click",(e=>{e.preventDefault(),t.open(e)}));for(let s of t.children)if("OPTION"===s.tagName)SimpleSelect_appendOptions(t,l,n,s,e);else if("OPTGROUP"===s.tagName){let i=document.createElement("div");i.classList.add("optgroup");let o=document.createElement("span");o.classList.add("title"),o.textContent=s.label,i.append(o);for(let n of s.children)SimpleSelect_appendOptions(t,l,i,n,e);n.append(i)}if(0===t.selectedOptions.length||""===t[0].value&&""===t[0].textContent){let n=document.createElement("span");n.classList.add("placeholder");let s=""!==e.placeholder?e.placeholder:" ";t.multiple||""===t[0].label||(s=t[0].label),n.textContent=s,l.querySelector("span.selected-top")?.remove(),l.prepend(n)}return l.append(n),t.style.display="none",t.parentNode.insertBefore(l,t.nextSibling),t.val=function(){let e=[];for(let l of t.selectedOptions)e.push(l.value);return t.multiple?e:e[0]},t.open=function(t=null){t?.stopPropagation(),SimpleSelect_openSelect3(l,e.dropdownMaxHeight)},t.close=function(e=null){e?.stopPropagation(),SimpleSelect_closeSelect3(l)},t.setAttribute("data-select3-initialized","1"),t},SimpleSelect_initDocumentListener();