function Select3_openSelect3(e,t){e.classList.add("opened");let l=e.querySelector(".inner"),n=l.scrollHeight;n=n>t?t:n,l.style.maxHeight=n+l.offsetHeight+"px",l.classList.remove("drop-up");let s=window.innerHeight-l.getBoundingClientRect().top;l.offsetHeight>=s&&l.classList.add("drop-up")}function Select3_closeSelect3(e){let t=e.querySelector(".inner");e.classList.remove("opened"),t.style.maxHeight="0px",null!==e.querySelector("input.search")&&(e.querySelector("input.search").value=""),e.querySelector(".no-results")?.remove();for(let t of e.querySelectorAll(".option-hidden"))t.classList.remove("option-hidden")}function Select3_openCloseSelect3(e,t={}){e.classList.toggle("opened"),e.classList.contains("opened")?Select3_openSelect3(e,t.dropdownMaxHeight):Select3_closeSelect3(e)}function Select3_appendOptions(e,t,l,n,s,o){let c=document.createElement("span");if(c.setAttribute("data-value",n.value.toString()),Object.keys(n.dataset).length){let e=n.dataset;for(const t in e)c.setAttribute("data-"+t,e[t])}if(n.selected){let l=c.cloneNode();if(l.classList.add("selected-top"),null!==o.formatOptionsFunction?l.innerHTML=o.formatOptionsFunction(n):n.label.length?l.textContent=n.label:l.textContent=n.text,s){let n=document.createElement("b");n.classList.add("remove"),n.textContent="×",n.addEventListener("click",(l=>{Select3_removeOption(e,t,l.target.parentElement)})),l.prepend(n)}t.append(l),c.classList.add("selected"),c.setAttribute("data-selected","1")}else c.setAttribute("data-selected","0");null!==o.formatOptionsFunction?c.innerHTML=o.formatOptionsFunction(n):n.label.length?c.textContent=n.label:c.textContent=n.text,n.disabled&&c.classList.add("disabled"),c.addEventListener("click",(l=>{let a=l.target,i=a.cloneNode();if(i.innerHTML=a.innerHTML,i.classList.add("selected-top"),!n.disabled){if(e.selectedOptions.length>=o.maximumSelectedOptions&&"0"===c.getAttribute("data-selected"))return;let l=!1;if((!s&&e.val()===i.getAttribute("data-value")||s&&e.val().includes(i.getAttribute("data-value")))&&(l=!0),s||l){if(s){if(l){if(t.querySelector(':scope > span[data-value="'+i.getAttribute("data-value")+'"]').remove(),n.removeAttribute("selected"),c.classList.remove("selected"),c.setAttribute("data-selected","0"),0===e.selectedOptions.length&&""!==o.placeholder){let e=document.createElement("span");e.classList.add("placeholder"),e.textContent=o.placeholder,t.prepend(e)}}else t.insertBefore(i,t.querySelector(".inner")),n.setAttribute("selected","selected"),c.classList.add("selected"),c.setAttribute("data-selected","1"),1===e.selectedOptions.length&&t.querySelector(":scope > span.placeholder")?.remove();e.selectedOptions.length===o.maximumSelectedOptions?t.classList.add("maxed"):t.classList.remove("maxed");let s=document.createElement("b");s.classList.add("remove"),s.textContent="×",s.addEventListener("click",(l=>{Select3_removeOption(e,t,l.target.parentElement)})),i.prepend(s),e.dispatchEvent(new Event("change"))}}else{let l=e.querySelectorAll("option");for(let e of l)e.removeAttribute("selected");let s=t.querySelectorAll(".inner span");for(let e of s)e.classList.remove("selected"),e.setAttribute("data-selected","0");n.setAttribute("selected","selected"),t.querySelector(".selected-top, .placeholder").replaceWith(i),c.classList.add("selected"),c.setAttribute("data-selected","1"),e.dispatchEvent(new Event("change"))}o.closeOnSelect&&Select3_closeSelect3(t,o)}})),l.append(c)}function Select3_removeOption(e,t,l){let n=l.getAttribute("data-value");e.querySelector('option[value="'+n+'"]').removeAttribute("selected");let s=t.querySelector('.inner span[data-value="'+n+'"]');s.classList.remove("selected"),s.setAttribute("data-selected","0"),l.remove(),e.dispatchEvent(new Event("change"))}function Select3_filterInput(e,t,l,n,s){e=e.toUpperCase();for(let l of t){if((l.textContent||l.innerText).toUpperCase().indexOf(e)>-1?l.classList.remove("option-hidden"):l.classList.add("option-hidden"),null!==l.closest("div.optgroup")){let e=!1,t=l.parentElement.querySelectorAll("span:not(.title, .no-results)");for(let l of t)if(!l.classList.contains("option-hidden")){e=!0;break}e?l.closest("div.optgroup").classList.remove("option-hidden"):l.closest("div.optgroup").classList.add("option-hidden")}}if(""!==s.searchNoResults){let e=n.querySelectorAll("span:not(.title, .no-results, .option-hidden)");if(e.length)n.querySelector(".no-results")?.remove();else if(!e.length&&!n.querySelector(".no-results")){let e=document.createElement("span");e.classList.add("no-results"),e.textContent=s.searchNoResults,n.append(e)}}}function Select3_applyConfig(e){const t={search:!1,closeOnSelect:!0,minimumInputLength:3,placeholder:"",searchNoResults:"",dropdownMaxHeight:300,maximumSelectedOptions:100,formatOptionsFunction:null};for(let l in e)t.hasOwnProperty(l)&&Select3_isOptionValid(l,e[l])&&(t[l]=e[l]);return t}function Select3_isOptionValid(e,t){switch(e){case"closeOnSelect":case"search":return"boolean"==typeof t;case"minimumInputLength":case"dropdownMaxHeight":case"maximumSelectedOptions":return"number"==typeof t&&t>0;case"placeholder":case"searchNoResults":return"string"==typeof t&&t.length>0&&t.length<200;case"formatOptionsFunction":return"function"==typeof t}}Element.prototype.Select3=function(e){const t=this;if("SELECT"!==t.tagName)return!1;e=Select3_applyConfig(e);let l=document.createElement("div");l.classList.add("select3");for(let e of t.classList)l.classList.add(e);l.addEventListener("click",(t=>{const l=t.target.classList;if(l.contains("select3")||l.contains("selected-top")||l.contains("placeholder")){let l=t.target.closest("div.select3");Select3_openCloseSelect3(l,e);for(let e of document.querySelectorAll("div.select3"))e.isEqualNode(l)||Select3_closeSelect3(e)}})),t.selectedOptions.length>e.maximumSelectedOptions&&(e.maximumSelectedOptions=t.selectedOptions.length),t.multiple?l.classList.add("multiple"):l.classList.add("single");let n=document.createElement("div");if(n.classList.add("inner"),e.search){let l=document.createElement("div");l.classList.add("search-wrapper");let s=document.createElement("input");s.classList.add("search"),s.setAttribute("type","search");let o=0;s.addEventListener("keyup",(l=>{let s=l.target.value.length;if(s>=e.minimumInputLength||s<o){let s=l.target.closest(".inner").querySelectorAll("span:not(.title, .no-results)");Select3_filterInput(l.target.value,s,t,n,e)}o=s})),l.append(s),n.prepend(l)}let s=document.querySelector('label[for="'+t.id+'"]');null!==s&&s.addEventListener("click",(t=>{t.stopPropagation();for(let e of document.querySelectorAll("div.select3"))Select3_closeSelect3(e);Select3_openSelect3(l,e.dropdownMaxHeight)}));for(let s of t.children)if("OPTION"===s.tagName)Select3_appendOptions(t,l,n,s,t.multiple,e);else if("OPTGROUP"===s.tagName){let o=document.createElement("div");o.classList.add("optgroup");let c=document.createElement("span");c.classList.add("title"),c.textContent=s.label,o.append(c);for(let n of s.children)Select3_appendOptions(t,l,o,n,t.multiple,e);n.append(o)}if(l.append(n),t.multiple&&0===t.selectedOptions.length&&""!==e.placeholder||!t.multiple&&""===t[0].value&&""===t[0].textContent&&""!==e.placeholder){let t=document.createElement("span");t.classList.add("placeholder"),t.textContent=e.placeholder,l.querySelector("span.selected-top")?.remove(),l.prepend(t)}return t.style.display="none",t.parentNode.insertBefore(l,t.nextSibling),t.val=function(){let e=[];for(let l of t.selectedOptions)e.push(l.value);return t.multiple?e:e[0]},console.log(t),t.open=function(){Select3_openSelect3(l,e.dropdownMaxHeight)},t.close=function(){Select3_closeSelect3(l)},t},document.addEventListener("click",(e=>{if(null===e.target.closest(".select3"))for(let e of document.querySelectorAll("div.select3"))Select3_closeSelect3(e)}));